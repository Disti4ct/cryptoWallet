(this["webpackJsonpcrypto-wallet"]=this["webpackJsonpcrypto-wallet"]||[]).push([[0],{129:function(e,t,n){},130:function(e,t,n){},138:function(e,t){},140:function(e,t){},151:function(e,t){},153:function(e,t){},166:function(e,t){},169:function(e,t){},244:function(e,t,n){},257:function(e,t,n){},258:function(e,t,n){},259:function(e,t,n){},260:function(e,t,n){},261:function(e,t,n){},262:function(e,t,n){},263:function(e,t,n){},264:function(e,t,n){},265:function(e,t,n){"use strict";n.r(t);var c=n(4),s=n.n(c),a=n(118),r=n.n(a),i=n(48),o=n(27),l=n(79),j=n(8);n(129);var d=n(50),u=n(119),b=n(124),h=n(123),p=(n(130),n(1)),m=function(e){Object(b.a)(n,e);var t=Object(h.a)(n);function n(e){var c;return Object(d.a)(this,n),(c=t.call(this,e)).state={error:null},c}return Object(u.a)(n,[{key:"componentDidCatch",value:function(e){this.setState({error:e})}},{key:"render",value:function(){var e=this.props.children,t=this.state.error;return Object(p.jsx)("div",{children:t?Object(p.jsx)("h1",{children:"Error"}):e})}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}}]),n}(s.a.Component),O=n(9),x=n.n(O),f=n(22),w=n(32),v=n(54),_=n(26),g=n(121),N=n(52),k=n(55),y=(n(244),n(53)),S=n(51),C=n(120),z=n.n(C),I=Object.freeze({BTC:new function e(t){var n=this;Object(d.a)(this,e),this.createWallet=function(e){var t=e.network,c=y.generateMnemonic(),s=y.mnemonicToSeedSync(c),a=S.fromSeed(s,t).derivePath("m/44'/0'/0'/0/0"),r=w.payments.p2pkh({pubkey:a.publicKey,network:t});return{balance:0,ticker:n.ticker,precision:n.precision,pubKey:a.publicKey,privKey:a.privateKey,address:r.address,mnemonic:c,network:t}},this.getBalance=function(){var e=Object(f.a)(x.a.mark((function e(t){var c,s,a,r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=t.address,t.network,!window.fetch){e.next=12;break}return e.next=4,fetch("".concat(n.api,"/address/").concat(c,"/balance/"));case 4:return s=e.sent,e.next=7,s.json();case 7:return a=e.sent,r=a.balance,a.unconfirmed,e.abrupt("return",new z.a(r).dividedBy(1e8).toNumber());case 12:return alert("your browser doesn't support this fetching balance"),e.abrupt("return",0);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.restoreWallet=function(){var e=Object(f.a)(x.a.mark((function e(t){var c,s,a,r,i,o,l;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.network,s=t.mnemonic,e.prev=1,a=y.mnemonicToSeedSync(s),r=S.fromSeed(a,c),i=r.derivePath("m/44'/0'/0'/0/0"),o=w.payments.p2pkh({pubkey:i.publicKey,network:c}),e.next=8,n.getBalance({address:o.address,network:c});case 8:return l=e.sent,e.abrupt("return",{balance:l,ticker:n.ticker,precision:n.precision,pubKey:i.publicKey,privKey:i.privateKey,address:o.address,mnemonic:s,network:c});case 12:return e.prev=12,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}(),this.send=Object(f.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));var c=t.name,s=t.ticker,a=t.precision,r=t.api;this.name=c,this.ticker=s,this.precision=a,this.api=r}({name:"Bitcoin",ticker:"BTC",precision:8,api:"https://api.bitcore.io/api/BTC/testnet"})}),T=(n(257),function(e){var t=e.children,n=e.isLoading,c=e.onClick,s=e.type;return Object(p.jsx)("button",{className:"button ".concat(n?"disable":""," ").concat(s||""),onClick:n?function(){return null}:c,children:n?Object(p.jsx)("span",{className:"button__loader",children:"Pending"}):t})}),A=(n(258),function(){return null}),B=function(e){var t=e.type,n=e.onChange,c=void 0===n?A:n;return"address"===t?Object(p.jsx)("input",{onChange:function(){c()},className:"input mono-font",type:"text",placeholder:"Recipient address"}):"amount"===t?Object(p.jsx)("input",{onChange:c,className:"input mono-font",type:"number",placeholder:"Amount"}):Object(p.jsx)("input",{onChange:c,className:"input",type:"text",placeholder:"..."})},K=function(e){var t=e.setActivePage,n=e.setWallets,s=e.setWallet,a=Object(c.useState)(!1),r=Object(j.a)(a,2),i=r[0],o=r[1],l=Object(c.useState)(!1),d=Object(j.a)(l,2),u=d[0],b=d[1],h=Object(c.useState)(void 0),m=Object(j.a)(h,2),O=m[0],y=m[1],S=Object(c.useState)(""),C=Object(j.a)(S,2),z=C[0],A=C[1],K=function(e){y(e),A(e.mnemonic),b(!0)},E=function(){O&&(s({name:O.ticker,wallet:O}),window.localStorage.setItem("page","wallet"),t("wallet"))},P=Object(c.useState)(""),W=Object(j.a)(P,2),D=W[0],F=W[1],L=function(){var e=Object(f.a)(x.a.mark((function e(){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.BTC.restoreWallet({mnemonic:D,network:w.networks.testnet});case 2:(t=e.sent)&&(y(t),E());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=Object(c.useState)(!1),J=Object(j.a)(R,2),M=J[0],V=J[1];return Object(p.jsxs)("div",{className:"settings",children:[Object(p.jsx)("h2",{className:"page-title",children:"SETTINGS"}),Object(p.jsxs)("div",{className:"settings__buttons-wrapper",children:[Object(p.jsxs)(T,{onClick:function(){var e=I.BTC.createWallet({network:w.networks.testnet});K(e)},children:[Object(p.jsx)("span",{className:"settings__icon",children:Object(p.jsx)(g.a,{size:"100%",color:"inherit"})}),"Create"]})," ",Object(p.jsxs)(T,{onClick:function(){o(!i)},children:[Object(p.jsx)("span",{className:"settings__icon",children:Object(p.jsx)(v.a,{size:"100%",color:"inherit"})}),"Restore"]})," ",Object(p.jsxs)(T,{onClick:function(){return V(!0)},children:[Object(p.jsx)("span",{className:"settings__icon",children:Object(p.jsx)(_.c,{size:"100%",color:"inherit"})}),"Logout"]})]}),u&&Object(p.jsxs)("section",{className:"settings__section",children:[Object(p.jsx)("p",{className:"warning",children:"Please save this mnemonic phrase in the safe place. You will be able to restore your wallet only with this phrase"}),Object(p.jsx)("p",{className:"new-mnemonic-phrase",children:z}),Object(p.jsxs)("div",{children:[Object(p.jsxs)(T,{type:"small",onClick:E,children:[Object(p.jsx)("span",{className:"settings__icon",children:Object(p.jsx)(N.a,{size:"100%",color:"inherit"})}),"I saved"]})," ",Object(p.jsxs)(T,{type:"small",onClick:function(){return b(!1)},children:[Object(p.jsx)("span",{className:"settings__icon",children:Object(p.jsx)(k.a,{size:"100%",color:"inherit"})}),"Cancel"]})]})]}),i&&Object(p.jsxs)("section",{className:"settings__section",children:[Object(p.jsx)(B,{type:"text",onChange:function(e){var t=e.target.value.trim().split(" ").filter((function(e){return e})).join(" ");F(t)}}),Object(p.jsxs)("div",{children:[Object(p.jsxs)(T,{type:"small",onClick:L,children:[Object(p.jsx)("span",{className:"settings__icon",children:Object(p.jsx)(v.a,{size:"100%",color:"inherit"})}),"Restore"]})," ",Object(p.jsxs)(T,{type:"small",onClick:function(){return o(!1)},children:[Object(p.jsx)("span",{className:"settings__icon",children:Object(p.jsx)(k.a,{size:"100%",color:"inherit"})}),"Close"]})]})]}),M&&Object(p.jsxs)("section",{className:"settings__section",children:[Object(p.jsx)("p",{className:"warning",children:"It cleans all data from your browser. Are you sure ?"}),Object(p.jsxs)("div",{children:[Object(p.jsxs)(T,{type:"small",onClick:function(){n({}),window.localStorage.clear()},children:[Object(p.jsx)("span",{className:"settings__icon",children:Object(p.jsx)(v.a,{size:"100%",color:"inherit"})}),"Confirm"]})," ",Object(p.jsxs)(T,{type:"small",onClick:function(){return V(!1)},children:[Object(p.jsx)("span",{className:"settings__icon",children:Object(p.jsx)(k.a,{size:"100%",color:"inherit"})}),"Cancel"]})]})]})]})},E=(n(259),n(33)),P=function(e){var t=e.isDark,n=e.setIsDark,c=e.setActivePage,s=function(e){window.localStorage.setItem("page",e),c(e)};return Object(p.jsxs)("nav",{className:"navigation",children:[Object(p.jsxs)("ul",{className:"navigation__list",children:[Object(p.jsx)("li",{children:Object(p.jsx)("button",{className:"navigation__button",onClick:function(){return s("wallet")},children:Object(p.jsx)(E.b,{size:"100%",color:"inherit"})})}),Object(p.jsx)("li",{children:Object(p.jsx)("button",{className:"navigation__button",onClick:function(){return s("transfer")},children:Object(p.jsx)(E.c,{size:"100%",color:"inherit"})})}),Object(p.jsx)("li",{children:Object(p.jsx)("button",{className:"navigation__button",onClick:function(){return s("settings")},children:Object(p.jsx)(E.d,{size:"100%",color:"inherit"})})})]}),Object(p.jsx)("button",{className:"navigation__theme-button",onClick:function(){window.localStorage.setItem("dark","".concat(!t)),n(!t)},children:t?Object(p.jsx)(_.b,{size:"100%",color:"inherit"}):Object(p.jsx)(_.d,{size:"100%",color:"inherit"})})]})},W=(n(260),function(e){var t=e.walletIcon,n=e.wallet,s=e.shortAddress,a=void 0!==s&&s,r=Object(c.useState)(""),i=Object(j.a)(r,2),o=i[0],l=i[1],d=Object(c.useState)(!1),u=Object(j.a)(d,2),b=u[0],h=u[1],m=Object(c.useRef)(null),O=n.address.substr(0,4)+"..."+n.address.substr(n.address.length-3,n.address.length);return Object(p.jsxs)("div",{className:"wallet-item",children:[Object(p.jsxs)("div",{className:"wallet-item__header",children:[Object(p.jsx)("span",{className:"wallet-item__icon",children:t}),Object(p.jsxs)("span",{className:"wallet-item__address",children:[Object(p.jsx)("span",{className:"mono-font",children:a?O:n.address}),Object(p.jsx)("form",{children:Object(p.jsx)("textarea",{ref:m,defaultValue:n.address})}),document.queryCommandSupported("copy")&&Object(p.jsxs)("button",{className:"wallet-item__copy-button",onClick:function(e){m.current.select(),document.execCommand("copy"),e.target.focus(),l(!0),setTimeout((function(){return l(!1)}),600)},children:[o&&Object(p.jsx)("span",{className:"wallet-item__copy-tip",children:"Copied!"}),Object(p.jsx)(E.a,{size:"100%",color:"var(--color)"})]})]})]}),Object(p.jsxs)("div",{className:"wallet-item__middle",children:[Object(p.jsxs)("span",{className:"wallet-item__balance-wrapper",children:[Object(p.jsxs)("span",{className:"wallet-item__crypto mono-font",children:[function(){var e=String(n.balance);return e.split(".").length>1&&e.split(".")[1].length>6&&(e=Number.parseFloat(e).toFixed(5).toString()+"..."),e}()," BTC"]}),Object(p.jsx)("button",{className:"wallet-item__update-balance",children:Object(p.jsx)(N.b,{size:"100%",color:"inherit"})})]}),Object(p.jsxs)("div",{children:[Object(p.jsx)("input",{type:"checkbox",name:"extra info",id:"wallet-item__extra-info",onChange:function(){h(!b)}}),Object(p.jsx)("label",{htmlFor:"wallet-item__extra-info",children:"Extra info"})]})]}),b&&Object(p.jsx)("div",{className:"wallet-item__footer",children:"Keys"})]})}),D=n(122),F=function(e){var t=e.wallets;return Object(p.jsxs)("div",{className:"wallets",children:[Object(p.jsx)("h2",{className:"page-title",children:"WALLETS"}),Object.keys(t).length?Object(p.jsx)(p.Fragment,{children:Object.keys(t).map((function(e,n){return t[e].length?Object(p.jsx)("div",{children:t[e].map((function(e,t){return Object(p.jsx)(W,{walletIcon:Object(p.jsx)(D.a,{size:"100%",color:"inherit"}),wallet:e},t)}))},n):null}))}):Object(p.jsx)("p",{className:"wallets__not-wallet",children:"No wallets"})]})},L=(n(261),n(262),function(e){var t=e.list,n=Object(c.useState)(!1),s=Object(j.a)(n,2),a=s[0],r=s[1];return Object(p.jsxs)("div",{className:"dropdown ".concat(a?"open":""),onClick:function(){1!==t.length&&r(!a)},children:[1===t.length?Object(p.jsx)("div",{className:"dropdown__list",children:Object(p.jsx)("div",{children:t[0]})}):Object(p.jsx)("div",{className:"dropdown__list many",children:t.map((function(e,t){return Object(p.jsx)("div",{className:"dropdown__item ".concat(t?"hidden":""),children:e},t)}))}),!a&&Object(p.jsx)(_.a,{size:"1.1rem",color:"var(--color)"})]})}),R=function(e){var t=e.ticker,n=e.address;return Object(p.jsxs)("div",{className:"dropdown-item",children:[Object(p.jsx)("span",{className:"dropdown-item__ticker",children:t}),Object(p.jsx)("span",{className:"dropdown-item__address",children:n})]})},J=function(e){var t=e.wallets,n=Object(c.useState)(!1),s=Object(j.a)(n,2),a=s[0],r=s[1],i=Object.keys(t).reduce((function(e,n){return[].concat(Object(o.a)(e),Object(o.a)(t[n]))}),[]).map((function(e){return Object(p.jsx)(R,{ticker:e.ticker,address:e.address})})),l=function(){var e=Object(f.a)(x.a.mark((function e(){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=function(){return new Promise((function(e){return setTimeout(e,2e3)}))},r(!0),e.next=4,t();case 4:r(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(p.jsxs)("div",{className:"transfer",children:[Object(p.jsx)("h2",{className:"page-title",children:"TRANSFER"}),Object(p.jsx)(L,{list:i}),Object(p.jsxs)("div",{className:"transfer__form-wrapper",children:[Object(p.jsxs)("div",{className:"transfer__input-wrapper",children:[Object(p.jsx)(B,{type:"address"}),Object(p.jsx)(B,{type:"amount"})]}),Object(p.jsx)(T,{isLoading:a,onClick:l,children:"SEND"})]})]})},M=(n(263),function(e){var t=e.setShowNotification;return Object(p.jsxs)("div",{className:"notification",children:[Object(p.jsx)("div",{className:"notification__body",children:"Notification text..."}),Object(p.jsx)("button",{className:"notification__close-button",onClick:function(){t(!0)},children:"Close"})]})}),V=function(){var e=Object(c.useState)(!1),t=Object(j.a)(e,2),n=t[0],s=t[1],a=window.matchMedia("(prefers-color-scheme: dark)"),r=window.localStorage.getItem("dark"),d=r?"true"===r:a.matches,u=Object(c.useState)(d),b=Object(j.a)(u,2),h=b[0],O=b[1],x=window.localStorage.getItem("page"),f=x||"wallet",w=Object(c.useState)(f),v=Object(j.a)(w,2),_=v[0],g=v[1],N=window.localStorage.getItem("wallets")||"{}",k=JSON.parse(N),y=Object(c.useState)(k),S=Object(j.a)(y,2),C=S[0],z=S[1];return"undefined"!==typeof window&&window.addEventListener("beforeunload",(function(e){e.preventDefault(),delete e.returnValue,function(e){var t=e.name,n=e.data;window.localStorage.setItem(t,n)}({name:"wallets",data:JSON.stringify(C)})})),Object(p.jsx)("div",{className:"App ".concat(h?"":"light"),children:Object(p.jsx)("div",{className:"App-body",children:Object(p.jsx)(m,{children:Object(p.jsxs)(p.Fragment,{children:[n&&Object(p.jsx)(M,{setShowNotification:s}),Object(p.jsxs)("div",{className:"App-body__page-wrapper",children:["wallet"===_&&Object(p.jsx)(F,{wallets:C}),"transfer"===_&&Object(p.jsx)(J,{wallets:C}),"settings"===_&&Object(p.jsx)(K,{setWallets:z,setWallet:function(e){var t=e.name,n=e.wallet,c=C[t]||[];z(Object(l.a)(Object(l.a)({},C),{},Object(i.a)({},t,[].concat(Object(o.a)(c),[n]))))},setActivePage:g})]}),Object(p.jsx)("header",{children:Object(p.jsx)(P,{setActivePage:g,setIsDark:O,isDark:h})})]})})})})};n(264);r.a.render(Object(p.jsx)(s.a.StrictMode,{children:Object(p.jsx)(V,{})}),document.getElementById("root"))}},[[265,1,2]]]);
//# sourceMappingURL=main.6deb7ff4.chunk.js.map